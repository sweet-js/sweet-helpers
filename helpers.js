'lang sweet.js';

const TypeCodes = {
  Identifier: 0,
  Keyword: 1,
  Punctuator: 2,
  NumericLiteral: 3,
  StringLiteral: 4,
  TemplateElement: 5,
  Template: 6,
  RegExp: 7
};

function check(obj, type) {
  return obj && obj.type === 'RawSyntax' && obj.value.token.typeCode === type;
}

export function unwrap(obj) {
  if (obj == null) return {};
  if (obj.type === 'RawSyntax') {
    if (obj.value.token.typeCode === TypeCodes.StringLiteral) {
      return {
        value: obj.value.token.str
      };
    } else if (obj.value.token.typeCode === TypeCodes.Template) {
      return {
        value: obj.value.token.items
      };
    } else {
      return {
        value: obj.value.token.value
      };
    }
  } else if (obj.type === 'RawDelimiter') {
    return {
      value: obj.inner
    };
  }
  return {};
}

export function isIdentifier(obj) {
  return check(obj, TypeCodes.Identifier);
}

export function fromIdentifier(obj, x) {
  return obj.value.fromIdentifier(x);
}

export function isKeyword(obj) {
  return check(obj, TypeCodes.Keyword);
}

export function fromKeyword(obj, x) {
  return obj.value.fromKeyword(x);
}

export function isPunctuator(obj) {
  return check(obj, TypeCodes.Punctuator);
}

export function fromPunctuator(obj, x) {
  return obj.value.fromPunctuator(x);
}

export function isNumericLiteral(obj) {
  return check(obj, TypeCodes.NumericLiteral);
}

export function fromNumericLiteral(obj, x) {
  return obj.value.fromNumber(x);
}

export function isStringLiteral(obj) {
  return check(obj, TypeCodes.StringLiteral);
}

export function fromStringLiteral(obj, x) {
  return obj.value.fromString(x);
}

export function isTemplateElement(obj) {
  return check(obj, TypeCodes.TemplateElement);
}

export function isTemplate(obj) {
  return check(obj, TypeCodes.Template);
}

export function isRegExp(obj) {
  return check(obj, TypeCodes.RegExp);
}

export function isParens(obj) {
  return obj && obj.type === 'RawDelimiter' && obj.kind === 'parens';
}

export function fromParens(obj, x) {
  return obj.value.from('parens', x);
}

export function isBrackets(obj) {
  return obj && obj.type === 'RawDelimiter' && obj.kind === 'brackets';
}

export function fromBrackets(obj, x) {
  return obj.value.from('brackets', x);
}

export function isBraces(obj) {
  return obj && obj.type === 'RawDelimiter' && obj.kind === 'braces';
}

export function fromBraces(obj, x) {
  return obj.value.from('braces', x);
}

export function isSyntaxTemplate(obj) {
  return obj && obj.type === 'RawDelimiter' && obj.kind === 'syntaxTemplate';
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9oZWxwZXJzLmpzIl0sIm5hbWVzIjpbIlR5cGVDb2RlcyIsIklkZW50aWZpZXIiLCJLZXl3b3JkIiwiUHVuY3R1YXRvciIsIk51bWVyaWNMaXRlcmFsIiwiU3RyaW5nTGl0ZXJhbCIsIlRlbXBsYXRlRWxlbWVudCIsIlRlbXBsYXRlIiwiUmVnRXhwIiwiY2hlY2siLCJvYmoiLCJ0eXBlIiwidmFsdWUiLCJ0b2tlbiIsInR5cGVDb2RlIiwidW53cmFwIiwic3RyIiwiaXRlbXMiLCJpbm5lciIsImlzSWRlbnRpZmllciIsImZyb21JZGVudGlmaWVyIiwieCIsImlzS2V5d29yZCIsImZyb21LZXl3b3JkIiwiaXNQdW5jdHVhdG9yIiwiZnJvbVB1bmN0dWF0b3IiLCJpc051bWVyaWNMaXRlcmFsIiwiZnJvbU51bWVyaWNMaXRlcmFsIiwiZnJvbU51bWJlciIsImlzU3RyaW5nTGl0ZXJhbCIsImZyb21TdHJpbmdMaXRlcmFsIiwiZnJvbVN0cmluZyIsImlzVGVtcGxhdGVFbGVtZW50IiwiaXNUZW1wbGF0ZSIsImlzUmVnRXhwIiwiaXNQYXJlbnMiLCJraW5kIiwiZnJvbVBhcmVucyIsImZyb20iLCJpc0JyYWNrZXRzIiwiZnJvbUJyYWNrZXRzIiwiaXNCcmFjZXMiLCJmcm9tQnJhY2VzIiwiaXNTeW50YXhUZW1wbGF0ZSJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBc0VBLE1BQU1BLFlBQVk7QUFDaEJDLGNBQVksQ0FESTtBQUVoQkMsV0FBUyxDQUZPO0FBR2hCQyxjQUFZLENBSEk7QUFJaEJDLGtCQUFnQixDQUpBO0FBS2hCQyxpQkFBZSxDQUxDO0FBTWhCQyxtQkFBaUIsQ0FORDtBQU9oQkMsWUFBVSxDQVBNO0FBUWhCQyxVQUFRO0FBUlEsQ0FBbEI7O0FBV0EsU0FBU0MsS0FBVCxDQUFlQyxHQUFmLEVBQTBCQyxJQUExQixFQUFnRDtBQUM5QyxTQUFPRCxPQUFPQSxJQUFJQyxJQUFKLEtBQWEsV0FBcEIsSUFBbUNELElBQUlFLEtBQUosQ0FBVUMsS0FBVixD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QXFDO0FBQzFDLFNBQU9BLE9BQU9BLElBQUlDLElBQUosS0FBYSxjQUFwQixJQUFzQ0QsSUFBSTBCLElBQUosS0FBYSxnQkFBMUQ7QUFDRCIsImZpbGUiOiJoZWxwZXJzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ2xhbmcgc3dlZXQuanMnO1xuLy8gQGZsb3dcblxudHlwZSBJZGVudGlmaWVyQ29kZSA9IDBcbnR5cGUgS2V5d29yZENvZGUgPSAxXG50eXBlIFB1bmN0dWF0b3JDb2RlID0gMlxudHlwZSBOdW1lcmljTGl0ZXJhbENvZGUgPSAzXG50eXBlIFN0cmluZ0xpdGVyYWxDb2RlID0gNFxudHlwZSBUZW1wbGF0ZUVsZW1lbnRDb2RlID0gNVxudHlwZSBUZW1wbGF0ZUNvZGUgPSA2XG50eXBlIFJlZ0V4cENvZGUgPSA3XG5cbnR5cGUgQ29kZXMgPSBJZGVudGlmaWVyQ29kZSB8IEtleXdvcmRDb2RlIHwgUHVuY3R1YXRvckNvZGUgfCBOdW1lcmljTGl0ZXJhbENvZGUgfCBTdHJpbmdMaXRlcmFsQ29kZSB8IFRlbXBsYXRlRWxlbWVudENvZGUgfCBUZW1wbGF0ZUNvZGUgfCBSZWdFeHBDb2RlXG5cbnR5cGUgSWRlbnRpZmllclRva2VuID0ge1xuICB0eXBlQ29kZTogSWRlbnRpZmllckNvZGU7XG4gIHZhbHVlOiBzdHJpbmdcbn1cbnR5cGUgS2V5d29yZFRva2VuID0ge1xuICB0eXBlQ29kZTogS2V5d29yZENvZGU7XG4gIHZhbHVlOiBzdHJpbmc7XG59XG50eXBlIFB1bmN0dWF0b3JUb2tlbiA9IHtcbiAgdHlwZUNvZGU6IFB1bmN0dWF0b3JDb2RlO1xuICB2YWx1ZTogc3RyaW5nO1xufVxudHlwZSBOdW1lcmljTGl0ZXJhbFRva2VuID0ge1xuICB0eXBlQ29kZTogTnVtZXJpY0xpdGVyYWxDb2RlO1xuICB2YWx1ZTogbnVtYmVyO1xufVxudHlwZSBTdHJpbmdMaXRlcmFsVG9rZW4gPSB7XG4gIHR5cGVDb2RlOiBTdHJpbmdMaXRlcmFsQ29kZTtcbiAgc3RyOiBzdHJpbmdcbn1cbnR5cGUgVGVtcGxhdGVFbGVtZW50VG9rZW4gPSB7XG4gIHR5cGVDb2RlOiBUZW1wbGF0ZUVsZW1lbnRDb2RlO1xuICB2YWx1ZTogc3RyaW5nO1xufVxudHlwZSBUZW1wbGF0ZVRva2VuID0ge1xuICB0eXBlQ29kZTogVGVtcGxhdGVDb2RlO1xuICBpdGVtczogVG9rZW5bXTtcbn1cbnR5cGUgUmVnRXhwVG9rZW4gPSB7XG4gIHR5cGVDb2RlOiBSZWdFeHBDb2RlO1xuICB2YWx1ZTogc3RyaW5nO1xufVxudHlwZSBUb2tlbiA9IElkZW50aWZpZXJUb2tlbiB8IEtleXdvcmRUb2tlbiB8IFB1bmN0dWF0b3JUb2tlbiB8IE51bWVyaWNMaXRlcmFsVG9rZW4gfCBTdHJpbmdMaXRlcmFsVG9rZW4gfCBUZW1wbGF0ZUVsZW1lbnRUb2tlbiB8IFRlbXBsYXRlVG9rZW4gfCBSZWdFeHBUb2tlblxuXG5pbnRlcmZhY2UgU3ludGF4IHtcbiAgdG9rZW46IFRva2VuO1xuICBmcm9tSWRlbnRpZmllcih2OiBzdHJpbmcpOiBTeW50YXg7XG4gIGZyb21LZXl3b3JkKHY6IHN0cmluZyk6IFN5bnRheDtcbiAgZnJvbVB1bmN0dWF0b3Iodjogc3RyaW5nKTogU3ludGF4O1xuICBmcm9tTnVtYmVyKG46IG51bWJlcik6IFN5bnRheDtcbiAgZnJvbVN0cmluZyhzOiBzdHJpbmcpOiBTeW50YXg7XG4gIGZyb20oa2luZDogc3RyaW5nLCB4OiBhbnkpOiBTeW50YXhcbn1cblxudHlwZSBSYXdTeW50YXggPSB7XG4gIHR5cGU6ICdSYXdTeW50YXgnO1xuICB2YWx1ZTogU3ludGF4O1xufVxudHlwZSBSYXdEZWxpbWl0ZXIgPSB7XG4gIHR5cGU6ICdSYXdEZWxpbWl0ZXInO1xuICBraW5kOiAnYnJhY2VzJyB8ICdwYXJlbnMnIHwgJ2JyYWNrZXRzJyB8ICdzeW50YXhUZW1wbGF0ZSc7XG4gIGlubmVyOiBUZXJtW11cbn1cblxuZXhwb3J0IHR5cGUgVGVybSA9IFJhd1N5bnRheCB8IFJhd0RlbGltaXRlclxuXG5jb25zdCBUeXBlQ29kZXMgPSB7XG4gIElkZW50aWZpZXI6IDAsXG4gIEtleXdvcmQ6IDEsXG4gIFB1bmN0dWF0b3I6IDIsXG4gIE51bWVyaWNMaXRlcmFsOiAzLFxuICBTdHJpbmdMaXRlcmFsOiA0LFxuICBUZW1wbGF0ZUVsZW1lbnQ6IDUsXG4gIFRlbXBsYXRlOiA2LFxuICBSZWdFeHA6IDcsXG59O1xuXG5mdW5jdGlvbiBjaGVjayhvYmo6IFRlcm0sIHR5cGU6IENvZGVzKTogYm9vbGVhbiB7XG4gIHJldHVybiBvYmogJiYgb2JqLnR5cGUgPT09ICdSYXdTeW50YXgnICYmIG9iai52YWx1ZS50b2tlbi50eXBlQ29kZSA9PT0gdHlwZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVud3JhcChvYmo6ID9UZXJtKTogeyB2YWx1ZT86IGFueSB9IHtcbiAgaWYgKG9iaiA9PSBudWxsKSByZXR1cm4ge307XG4gIGlmIChvYmoudHlwZSA9PT0gJ1Jhd1N5bnRheCcpIHtcbiAgICBpZiAob2JqLnZhbHVlLnRva2VuLnR5cGVDb2RlID09PSBUeXBlQ29kZXMuU3RyaW5nTGl0ZXJhbCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsdWU6IG9iai52YWx1ZS50b2tlbi5zdHJcbiAgICAgIH07XG4gICAgfSBlbHNlIGlmIChvYmoudmFsdWUudG9rZW4udHlwZUNvZGUgPT09IFR5cGVDb2Rlcy5UZW1wbGF0ZSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsdWU6IG9iai52YWx1ZS50b2tlbi5pdGVtc1xuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsdWU6IG9iai52YWx1ZS50b2tlbi52YWx1ZVxuICAgICAgfTtcbiAgICB9XG4gIH0gZWxzZSBpZiAob2JqLnR5cGUgPT09ICdSYXdEZWxpbWl0ZXInKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHZhbHVlOiBvYmouaW5uZXIsXG4gICAgfTtcbiAgfVxuICByZXR1cm4ge307XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0lkZW50aWZpZXIob2JqOiBUZXJtKSB7XG4gIHJldHVybiBjaGVjayhvYmosIFR5cGVDb2Rlcy5JZGVudGlmaWVyKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21JZGVudGlmaWVyKG9iajogUmF3U3ludGF4LCB4OiBzdHJpbmcpIHtcbiAgcmV0dXJuIG9iai52YWx1ZS5mcm9tSWRlbnRpZmllcih4KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzS2V5d29yZChvYmo6IFRlcm0pIHtcbiAgcmV0dXJuIGNoZWNrKG9iaiwgVHlwZUNvZGVzLktleXdvcmQpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZnJvbUtleXdvcmQob2JqOiBSYXdTeW50YXgsIHg6IHN0cmluZykge1xuICByZXR1cm4gb2JqLnZhbHVlLmZyb21LZXl3b3JkKHgpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNQdW5jdHVhdG9yKG9iajogVGVybSkge1xuICByZXR1cm4gY2hlY2sob2JqLCBUeXBlQ29kZXMuUHVuY3R1YXRvcik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tUHVuY3R1YXRvcihvYmo6IFJhd1N5bnRheCwgeDogc3RyaW5nKSB7XG4gIHJldHVybiBvYmoudmFsdWUuZnJvbVB1bmN0dWF0b3IoeCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc051bWVyaWNMaXRlcmFsKG9iajogVGVybSkge1xuICByZXR1cm4gY2hlY2sob2JqLCBUeXBlQ29kZXMuTnVtZXJpY0xpdGVyYWwpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZnJvbU51bWVyaWNMaXRlcmFsKG9iajogUmF3U3ludGF4LCB4OiBudW1iZXIpIHtcbiAgcmV0dXJuIG9iai52YWx1ZS5mcm9tTnVtYmVyKHgpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNTdHJpbmdMaXRlcmFsKG9iajogVGVybSkge1xuICByZXR1cm4gY2hlY2sob2JqLCBUeXBlQ29kZXMuU3RyaW5nTGl0ZXJhbCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tU3RyaW5nTGl0ZXJhbChvYmo6IFJhd1N5bnRheCwgeDogc3RyaW5nKSB7XG4gIHJldHVybiBvYmoudmFsdWUuZnJvbVN0cmluZyh4KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzVGVtcGxhdGVFbGVtZW50KG9iajogVGVybSkge1xuICByZXR1cm4gY2hlY2sob2JqLCBUeXBlQ29kZXMuVGVtcGxhdGVFbGVtZW50KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzVGVtcGxhdGUob2JqOiBUZXJtKSB7XG4gIHJldHVybiBjaGVjayhvYmosIFR5cGVDb2Rlcy5UZW1wbGF0ZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1JlZ0V4cChvYmo6IFRlcm0pIHtcbiAgcmV0dXJuIGNoZWNrKG9iaiwgVHlwZUNvZGVzLlJlZ0V4cCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1BhcmVucyhvYmo6IFRlcm0pIHtcbiAgcmV0dXJuIG9iaiAmJiBvYmoudHlwZSA9PT0gJ1Jhd0RlbGltaXRlcicgJiYgb2JqLmtpbmQgPT09ICdwYXJlbnMnO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZnJvbVBhcmVucyhvYmo6IFJhd1N5bnRheCwgeDogVGVybVtdKSB7XG4gIHJldHVybiBvYmoudmFsdWUuZnJvbSgncGFyZW5zJywgeCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0JyYWNrZXRzKG9iajogVGVybSkge1xuICByZXR1cm4gb2JqICYmIG9iai50eXBlID09PSAnUmF3RGVsaW1pdGVyJyAmJiBvYmoua2luZCA9PT0gJ2JyYWNrZXRzJztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21CcmFja2V0cyhvYmo6IFJhd1N5bnRheCwgeDogVGVybVtdKSB7XG4gIHJldHVybiBvYmoudmFsdWUuZnJvbSgnYnJhY2tldHMnLCB4KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzQnJhY2VzKG9iajogVGVybSkge1xuICByZXR1cm4gb2JqICYmIG9iai50eXBlID09PSAnUmF3RGVsaW1pdGVyJyAmJiBvYmoua2luZCA9PT0gJ2JyYWNlcyc7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tQnJhY2VzKG9iajogUmF3U3ludGF4LCB4OiBUZXJtW10pIHtcbiAgcmV0dXJuIG9iai52YWx1ZS5mcm9tKCdicmFjZXMnLCB4KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzU3ludGF4VGVtcGxhdGUob2JqOiBUZXJtKSB7XG4gIHJldHVybiBvYmogJiYgb2JqLnR5cGUgPT09ICdSYXdEZWxpbWl0ZXInICYmIG9iai5raW5kID09PSAnc3ludGF4VGVtcGxhdGUnO1xufSJdfQ==