'lang sweet.js';

const TypeCodes = {
  Identifier: 0,
  Keyword: 1,
  Punctuator: 2,
  NumericLiteral: 3,
  StringLiteral: 4,
  TemplateElement: 5,
  Template: 6,
  RegExp: 7
};

function check(obj, type) {
  return obj && obj.type === 'RawSyntax' && obj.value.token.typeCode === type;
}

export function unwrap(obj) {
  if (obj == null) return {};
  if (obj.type === 'RawSyntax') {
    if (obj.value.token.typeCode === TypeCodes.StringLiteral) {
      return {
        value: obj.value.token.str
      };
    } else if (obj.value.token.typeCode === TypeCodes.Template) {
      return {
        value: obj.value.token.items
      };
    } else {
      return {
        value: obj.value.token.value
      };
    }
  } else if (obj.type === 'RawDelimiter') {
    return {
      value: obj.inner
    };
  }
  return {};
}

export function isIdentifier(obj) {
  return check(obj, TypeCodes.Identifier);
}

export function fromIdentifier(obj, x) {
  return obj.value.fromIdentifier(x);
}

export function isKeyword(obj) {
  return check(obj, TypeCodes.Keyword);
}

export function fromKeyword(obj, x) {
  return obj.value.fromKeyword(x);
}

export function isPunctuator(obj) {
  return check(obj, TypeCodes.Punctuator);
}

export function fromPunctuator(obj, x) {
  return obj.value.fromPunctuator(x);
}

export function isNumericLiteral(obj) {
  return check(obj, TypeCodes.NumericLiteral);
}

export function fromNumericLiteral(obj, x) {
  return obj.value.fromNumber(x);
}

export function isStringLiteral(obj) {
  return check(obj, TypeCodes.StringLiteral);
}

export function fromStringLiteral(obj, x) {
  return obj.value.fromString(x);
}

export function isTemplateElement(obj) {
  return check(obj, TypeCodes.TemplateElement);
}

export function isTemplate(obj) {
  return check(obj, TypeCodes.Template);
}

export function isRegExp(obj) {
  return check(obj, TypeCodes.RegExp);
}

export function isDelimiter(obj) {
  return obj && obj.type === 'RawDelimiter';
}

export function isParens(obj) {
  return obj && obj.type === 'RawDelimiter' && obj.kind === 'parens';
}

export function fromParens(obj, x) {
  return obj.value.from('parens', x);
}

export function isBrackets(obj) {
  return obj && obj.type === 'RawDelimiter' && obj.kind === 'brackets';
}

export function fromBrackets(obj, x) {
  return obj.value.from('brackets', x);
}

export function isBraces(obj) {
  return obj && obj.type === 'RawDelimiter' && obj.kind === 'braces';
}

export function fromBraces(obj, x) {
  return obj.value.from('braces', x);
}

export function isSyntaxTemplate(obj) {
  return obj && obj.type === 'RawDelimiter' && obj.kind === 'syntaxTemplate';
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9oZWxwZXJzLmpzIl0sIm5hbWVzIjpbIlR5cGVDb2RlcyIsIklkZW50aWZpZXIiLCJLZXl3b3JkIiwiUHVuY3R1YXRvciIsIk51bWVyaWNMaXRlcmFsIiwiU3RyaW5nTGl0ZXJhbCIsIlRlbXBsYXRlRWxlbWVudCIsIlRlbXBsYXRlIiwiUmVnRXhwIiwiY2hlY2siLCJvYmoiLCJ0eXBlIiwidmFsdWUiLCJ0b2tlbiIsInR5cGVDb2RlIiwidW53cmFwIiwic3RyIiwiaXRlbXMiLCJpbm5lciIsImlzSWRlbnRpZmllciIsImZyb21JZGVudGlmaWVyIiwieCIsImlzS2V5d29yZCIsImZyb21LZXl3b3JkIiwiaXNQdW5jdHVhdG9yIiwiZnJvbVB1bmN0dWF0b3IiLCJpc051bWVyaWNMaXRlcmFsIiwiZnJvbU51bWVyaWNMaXRlcmFsIiwiZnJvbU51bWJlciIsImlzU3RyaW5nTGl0ZXJhbCIsImZyb21TdHJpbmdMaXRlcmFsIiwiZnJvbVN0cmluZyIsImlzVGVtcGxhdGVFbGVtZW50IiwiaXNUZW1wbGF0ZSIsImlzUmVnRXhwIiwiaXNEZWxpbWl0ZXIiLCJpc1BhcmVucyIsImtpbmQiLCJmcm9tUGFyZW5zIiwiZnJvbSIsImlzQnJhY2tldHMiLCJmcm9tQnJhY2tldHMiLCJpc0JyYWNlcyIsImZyb21CcmFjZXMiLCJpc1N5bnRheFRlbXBsYXRlIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFzRUEsTUFBTUEsWUFBWTtBQUNoQkMsY0FBWSxDQURJO0FBRWhCQyxXQUFTLENBRk87QUFHaEJDLGNBQVksQ0FISTtBQUloQkMsa0JBQWdCLENBSkE7QUFLaEJDLGlCQUFlLENBTEM7QUFNaEJDLG1CQUFpQixDQU5EO0FBT2hCQyxZQUFVLENBUE07QUFRaEJDLFVBQVE7QUFSUSxDQUFsQjs7QUFXQSxTQUFTQyxLQUFULENBQWVDLEdBQWYsRUFBMEJDLElBQTFCLEVBQWdEO0FBQzlDLFNBQU9ELE9BQU9BLElBQUlDLElBQUosS0FBYSxXQUFwQixJQUFtQ0QsSUFBSUUsS0FB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QUFPWCxJQUFJRSxLQUFKLENBQVUyQixJQUFWLENBQWUsUUFBZixFQUF5QmxCLENBQXpCLENBQVA7QUFDRDs7QUFFRCxPQUFPLFNBQVN1QixnQkFBVCxDQUEwQmxDLEdBQTFCLEVBQXFDO0FBQzFDLFNBQU9BLE9BQU9BLElBQUlDLElBQUosS0FBYSxjQUFwQixJQUFzQ0QsSUFBSTJCLElBQUosS0FBYSxnQkFBMUQ7QUFDRCIsImZpbGUiOiJoZWxwZXJzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ2xhbmcgc3dlZXQuanMnO1xuLy8gQGZsb3dcblxudHlwZSBJZGVudGlmaWVyQ29kZSA9IDBcbnR5cGUgS2V5d29yZENvZGUgPSAxXG50eXBlIFB1bmN0dWF0b3JDb2RlID0gMlxudHlwZSBOdW1lcmljTGl0ZXJhbENvZGUgPSAzXG50eXBlIFN0cmluZ0xpdGVyYWxDb2RlID0gNFxudHlwZSBUZW1wbGF0ZUVsZW1lbnRDb2RlID0gNVxudHlwZSBUZW1wbGF0ZUNvZGUgPSA2XG50eXBlIFJlZ0V4cENvZGUgPSA3XG5cbnR5cGUgQ29kZXMgPSBJZGVudGlmaWVyQ29kZSB8IEtleXdvcmRDb2RlIHwgUHVuY3R1YXRvckNvZGUgfCBOdW1lcmljTGl0ZXJhbENvZGUgfCBTdHJpbmdMaXRlcmFsQ29kZSB8IFRlbXBsYXRlRWxlbWVudENvZGUgfCBUZW1wbGF0ZUNvZGUgfCBSZWdFeHBDb2RlXG5cbnR5cGUgSWRlbnRpZmllclRva2VuID0ge1xuICB0eXBlQ29kZTogSWRlbnRpZmllckNvZGU7XG4gIHZhbHVlOiBzdHJpbmdcbn1cbnR5cGUgS2V5d29yZFRva2VuID0ge1xuICB0eXBlQ29kZTogS2V5d29yZENvZGU7XG4gIHZhbHVlOiBzdHJpbmc7XG59XG50eXBlIFB1bmN0dWF0b3JUb2tlbiA9IHtcbiAgdHlwZUNvZGU6IFB1bmN0dWF0b3JDb2RlO1xuICB2YWx1ZTogc3RyaW5nO1xufVxudHlwZSBOdW1lcmljTGl0ZXJhbFRva2VuID0ge1xuICB0eXBlQ29kZTogTnVtZXJpY0xpdGVyYWxDb2RlO1xuICB2YWx1ZTogbnVtYmVyO1xufVxudHlwZSBTdHJpbmdMaXRlcmFsVG9rZW4gPSB7XG4gIHR5cGVDb2RlOiBTdHJpbmdMaXRlcmFsQ29kZTtcbiAgc3RyOiBzdHJpbmdcbn1cbnR5cGUgVGVtcGxhdGVFbGVtZW50VG9rZW4gPSB7XG4gIHR5cGVDb2RlOiBUZW1wbGF0ZUVsZW1lbnRDb2RlO1xuICB2YWx1ZTogc3RyaW5nO1xufVxudHlwZSBUZW1wbGF0ZVRva2VuID0ge1xuICB0eXBlQ29kZTogVGVtcGxhdGVDb2RlO1xuICBpdGVtczogVG9rZW5bXTtcbn1cbnR5cGUgUmVnRXhwVG9rZW4gPSB7XG4gIHR5cGVDb2RlOiBSZWdFeHBDb2RlO1xuICB2YWx1ZTogc3RyaW5nO1xufVxudHlwZSBUb2tlbiA9IElkZW50aWZpZXJUb2tlbiB8IEtleXdvcmRUb2tlbiB8IFB1bmN0dWF0b3JUb2tlbiB8IE51bWVyaWNMaXRlcmFsVG9rZW4gfCBTdHJpbmdMaXRlcmFsVG9rZW4gfCBUZW1wbGF0ZUVsZW1lbnRUb2tlbiB8IFRlbXBsYXRlVG9rZW4gfCBSZWdFeHBUb2tlblxuXG5pbnRlcmZhY2UgU3ludGF4IHtcbiAgdG9rZW46IFRva2VuO1xuICBmcm9tSWRlbnRpZmllcih2OiBzdHJpbmcpOiBTeW50YXg7XG4gIGZyb21LZXl3b3JkKHY6IHN0cmluZyk6IFN5bnRheDtcbiAgZnJvbVB1bmN0dWF0b3Iodjogc3RyaW5nKTogU3ludGF4O1xuICBmcm9tTnVtYmVyKG46IG51bWJlcik6IFN5bnRheDtcbiAgZnJvbVN0cmluZyhzOiBzdHJpbmcpOiBTeW50YXg7XG4gIGZyb20oa2luZDogc3RyaW5nLCB4OiBhbnkpOiBTeW50YXhcbn1cblxudHlwZSBSYXdTeW50YXggPSB7XG4gIHR5cGU6ICdSYXdTeW50YXgnO1xuICB2YWx1ZTogU3ludGF4O1xufVxudHlwZSBSYXdEZWxpbWl0ZXIgPSB7XG4gIHR5cGU6ICdSYXdEZWxpbWl0ZXInO1xuICBraW5kOiAnYnJhY2VzJyB8ICdwYXJlbnMnIHwgJ2JyYWNrZXRzJyB8ICdzeW50YXhUZW1wbGF0ZSc7XG4gIGlubmVyOiBUZXJtW11cbn1cblxuZXhwb3J0IHR5cGUgVGVybSA9IFJhd1N5bnRheCB8IFJhd0RlbGltaXRlclxuXG5jb25zdCBUeXBlQ29kZXMgPSB7XG4gIElkZW50aWZpZXI6IDAsXG4gIEtleXdvcmQ6IDEsXG4gIFB1bmN0dWF0b3I6IDIsXG4gIE51bWVyaWNMaXRlcmFsOiAzLFxuICBTdHJpbmdMaXRlcmFsOiA0LFxuICBUZW1wbGF0ZUVsZW1lbnQ6IDUsXG4gIFRlbXBsYXRlOiA2LFxuICBSZWdFeHA6IDcsXG59O1xuXG5mdW5jdGlvbiBjaGVjayhvYmo6IFRlcm0sIHR5cGU6IENvZGVzKTogYm9vbGVhbiB7XG4gIHJldHVybiBvYmogJiYgb2JqLnR5cGUgPT09ICdSYXdTeW50YXgnICYmIG9iai52YWx1ZS50b2tlbi50eXBlQ29kZSA9PT0gdHlwZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVud3JhcChvYmo6ID9UZXJtKTogeyB2YWx1ZT86IGFueSB9IHtcbiAgaWYgKG9iaiA9PSBudWxsKSByZXR1cm4ge307XG4gIGlmIChvYmoudHlwZSA9PT0gJ1Jhd1N5bnRheCcpIHtcbiAgICBpZiAob2JqLnZhbHVlLnRva2VuLnR5cGVDb2RlID09PSBUeXBlQ29kZXMuU3RyaW5nTGl0ZXJhbCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsdWU6IG9iai52YWx1ZS50b2tlbi5zdHJcbiAgICAgIH07XG4gICAgfSBlbHNlIGlmIChvYmoudmFsdWUudG9rZW4udHlwZUNvZGUgPT09IFR5cGVDb2Rlcy5UZW1wbGF0ZSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsdWU6IG9iai52YWx1ZS50b2tlbi5pdGVtc1xuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsdWU6IG9iai52YWx1ZS50b2tlbi52YWx1ZVxuICAgICAgfTtcbiAgICB9XG4gIH0gZWxzZSBpZiAob2JqLnR5cGUgPT09ICdSYXdEZWxpbWl0ZXInKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHZhbHVlOiBvYmouaW5uZXIsXG4gICAgfTtcbiAgfVxuICByZXR1cm4ge307XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0lkZW50aWZpZXIob2JqOiBUZXJtKSB7XG4gIHJldHVybiBjaGVjayhvYmosIFR5cGVDb2Rlcy5JZGVudGlmaWVyKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21JZGVudGlmaWVyKG9iajogUmF3U3ludGF4LCB4OiBzdHJpbmcpIHtcbiAgcmV0dXJuIG9iai52YWx1ZS5mcm9tSWRlbnRpZmllcih4KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzS2V5d29yZChvYmo6IFRlcm0pIHtcbiAgcmV0dXJuIGNoZWNrKG9iaiwgVHlwZUNvZGVzLktleXdvcmQpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZnJvbUtleXdvcmQob2JqOiBSYXdTeW50YXgsIHg6IHN0cmluZykge1xuICByZXR1cm4gb2JqLnZhbHVlLmZyb21LZXl3b3JkKHgpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNQdW5jdHVhdG9yKG9iajogVGVybSkge1xuICByZXR1cm4gY2hlY2sob2JqLCBUeXBlQ29kZXMuUHVuY3R1YXRvcik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tUHVuY3R1YXRvcihvYmo6IFJhd1N5bnRheCwgeDogc3RyaW5nKSB7XG4gIHJldHVybiBvYmoudmFsdWUuZnJvbVB1bmN0dWF0b3IoeCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc051bWVyaWNMaXRlcmFsKG9iajogVGVybSkge1xuICByZXR1cm4gY2hlY2sob2JqLCBUeXBlQ29kZXMuTnVtZXJpY0xpdGVyYWwpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZnJvbU51bWVyaWNMaXRlcmFsKG9iajogUmF3U3ludGF4LCB4OiBudW1iZXIpIHtcbiAgcmV0dXJuIG9iai52YWx1ZS5mcm9tTnVtYmVyKHgpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNTdHJpbmdMaXRlcmFsKG9iajogVGVybSkge1xuICByZXR1cm4gY2hlY2sob2JqLCBUeXBlQ29kZXMuU3RyaW5nTGl0ZXJhbCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tU3RyaW5nTGl0ZXJhbChvYmo6IFJhd1N5bnRheCwgeDogc3RyaW5nKSB7XG4gIHJldHVybiBvYmoudmFsdWUuZnJvbVN0cmluZyh4KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzVGVtcGxhdGVFbGVtZW50KG9iajogVGVybSkge1xuICByZXR1cm4gY2hlY2sob2JqLCBUeXBlQ29kZXMuVGVtcGxhdGVFbGVtZW50KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzVGVtcGxhdGUob2JqOiBUZXJtKSB7XG4gIHJldHVybiBjaGVjayhvYmosIFR5cGVDb2Rlcy5UZW1wbGF0ZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1JlZ0V4cChvYmo6IFRlcm0pIHtcbiAgcmV0dXJuIGNoZWNrKG9iaiwgVHlwZUNvZGVzLlJlZ0V4cCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0RlbGltaXRlcihvYmo6IFRlcm0pIHtcbiAgcmV0dXJuIG9iaiAmJiBvYmoudHlwZSA9PT0gJ1Jhd0RlbGltaXRlcic7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1BhcmVucyhvYmo6IFRlcm0pIHtcbiAgcmV0dXJuIG9iaiAmJiBvYmoudHlwZSA9PT0gJ1Jhd0RlbGltaXRlcicgJiYgb2JqLmtpbmQgPT09ICdwYXJlbnMnO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZnJvbVBhcmVucyhvYmo6IFJhd1N5bnRheCwgeDogVGVybVtdKSB7XG4gIHJldHVybiBvYmoudmFsdWUuZnJvbSgncGFyZW5zJywgeCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0JyYWNrZXRzKG9iajogVGVybSkge1xuICByZXR1cm4gb2JqICYmIG9iai50eXBlID09PSAnUmF3RGVsaW1pdGVyJyAmJiBvYmoua2luZCA9PT0gJ2JyYWNrZXRzJztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21CcmFja2V0cyhvYmo6IFJhd1N5bnRheCwgeDogVGVybVtdKSB7XG4gIHJldHVybiBvYmoudmFsdWUuZnJvbSgnYnJhY2tldHMnLCB4KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzQnJhY2VzKG9iajogVGVybSkge1xuICByZXR1cm4gb2JqICYmIG9iai50eXBlID09PSAnUmF3RGVsaW1pdGVyJyAmJiBvYmoua2luZCA9PT0gJ2JyYWNlcyc7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tQnJhY2VzKG9iajogUmF3U3ludGF4LCB4OiBUZXJtW10pIHtcbiAgcmV0dXJuIG9iai52YWx1ZS5mcm9tKCdicmFjZXMnLCB4KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzU3ludGF4VGVtcGxhdGUob2JqOiBUZXJtKSB7XG4gIHJldHVybiBvYmogJiYgb2JqLnR5cGUgPT09ICdSYXdEZWxpbWl0ZXInICYmIG9iai5raW5kID09PSAnc3ludGF4VGVtcGxhdGUnO1xufSJdfQ==